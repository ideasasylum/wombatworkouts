<%
# Dashboard View
#
# Main dashboard showing recent programs and workouts
# Uses minimalist card-based layout matching prototype design
%>

<div class="min-h-screen py-6 md:py-12 px-4 sm:px-6 lg:px-8 w-full">
  <div class="max-w-7xl mx-auto">
    <!-- Programs Section -->
    <section>
      <div class="flex justify-between items-center mb-6">
        <h1 class="text-h1 text-[rgb(26,26,26)]">Programs</h1>
        <% if @programs.any? %>
          <%= render 'shared/button',
            text: 'New',
            url: new_program_path,
            type: :secondary,
            size: :small,
            icon: 'plus',
            icon_position: :left,
            html_options: { class: 'md:w-32 !bg-[rgb(237,242,247)]' } %>
        <% end %>
      </div>

      <% if @programs.empty? %>
        <!-- Empty state -->
        <div class="bg-white border border-[rgb(204,204,204)] p-12 text-center">
          <div class="max-w-md mx-auto">
            <h2 class="text-h2 text-[rgb(26,26,26)] mb-2">Create Your First Program</h2>
            <p class="text-body text-[rgb(107,114,128)] mb-6">Get started by creating your first exercise program to organize your workouts</p>
            <%= render 'shared/button',
              text: 'New Program',
              url: new_program_path,
              type: :primary,
              size: :base,
              icon: 'plus',
              icon_position: :left %>
          </div>
        </div>
      <% else %>
        <!-- Program cards -->
        <div class="space-y-4">
          <% @programs.each do |program| %>
            <%= render 'programs/program_card', program: program, show_collapsible: true %>
          <% end %>

          <!-- View All Programs link (if more exist) -->
          <% if @has_more_programs %>
            <div class="text-center pt-2">
              <%= link_to "View All Programs", programs_path, class: "text-body text-[rgb(26,26,26)] hover:text-[rgb(107,114,128)] font-medium" %>
            </div>
          <% end %>
        </div>
      <% end %>
    </section>

    <!-- Recent Workouts Section (if any exist) -->
    <% if @workouts.any? %>
      <section class="mt-12">
        <div class="mb-6">
          <h2 class="text-h1 text-[rgb(26,26,26)]">Recent Workouts</h2>
        </div>

        <!-- Workout cards -->
        <div class="space-y-4">
          <% @workouts.each do |workout| %>
            <%= render 'workouts/card', workout: workout, show_delete: false %>
          <% end %>

          <!-- View All Workouts link -->
          <% if @has_more_workouts %>
            <div class="text-center pt-2">
              <%= link_to "View All Workouts", workouts_path, class: "text-body text-[rgb(26,26,26)] hover:text-[rgb(107,114,128)] font-medium" %>
            </div>
          <% end %>
        </div>
      </section>
    <% end %>
  </div>
</div>
